# ShpBackup v3

### CHANGELOG 1.1.0
Release Date: 2019-08-21
-	config.properties : 백업 전/후로 PRE/POST Query 사용 여부 설정 가능(prequery.txt, postquery.txt)
-	table.properties : 테이블명 설정 가능. 값이 없으면 백업에서 제외됨
-	모든 설정 파일은 파일명 변경 금지
-	DBCP (Database Connection Pool) 사용: 설정값 추가 연구 필요
-	백업 대상 shp 파일 선택 기준(A부터 우선순위):
-	shp 확장자 파일 있음
-	table.properties 에 테이블명 있음
-	shp 파일크기가 100 바이트 이상: 개선 필요
-	config.properties 에서 설정한 shp 폴더 안에 5번 기준으로 선택된 파일이 없으면 백업 진행 X, 로그에 ‘백업 대상 shp 파일이 없음’ 메시지 기록됨
-	shp 파일별로 쓰레드 작업 실행: 서버 테이블에 INSERT 순서가 랜덤
-	테이블별로 백업 시작하기 전 테이블 비우기(TRUNCATE)를 1회 실행. 단, MySQL DB에서 데이터를 하나도 가져오지 못할 경우 비우기 작업을 롤백한다. 정상적인 데이터가 한 개라도 존재할 경우 백업이 진행되며, 이때 비워진 테이블은 롤백되지 않는다.
-	여러 에러 케이스에 대해 에러 로그 세분화: 파일명+테이블명+FTR_IDN+에러메시지 표시
-	데이터 INSERT 중 오류가 발생할 경우 해당 데이터만 백업을 건너뛰며, 정상 데이터는 정상 백업된다.
-	결과 출력창:
-	정상 완료: 해당 shp 파일에 대한 모든 백업이 정상적으로 완료
-	일부 에러: 해당 shp 파일 데이터 일부에서 오류 발생, 정상 데이터는 정상 백업. 로그 분석 필요
-	전체 에러: DB 문제 등으로 데이터를 하나도 가져오지 못한 경우 백업 시작 X, 롤백 실행됨
-	로그 파일: log 폴더내 위치, logback.log 파일에 기록되며, 누적된 로그 파일 크기가 5 MB 를 넘어가면 zip 으로 압축되고 새 로그 파일에서 이어서 기록
